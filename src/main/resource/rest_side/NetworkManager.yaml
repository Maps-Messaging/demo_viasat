#
# Copyright [ 2020 - 2024 ] [Matthew Buckton]
# Copyright [ 2024 - 2025 ] [Maps Messaging B.V.]
#
#   Licensed under the Apache License, Version 2.0 (the "License");
#   you may not use this file except in compliance with the License.
#   You may obtain a copy of the License at
#
#       http://www.apache.org/licenses/LICENSE-2.0
#
#   Unless required by applicable law or agreed to in writing, software
#   distributed under the License is distributed on an "AS IS" BASIS,
#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#   See the License for the specific language governing permissions and
#   limitations under the License.
#

---
NetworkManager:
    global:

      # ---------------------------------------------------------------------------------------------------------
      # tcp layer configuration
      # ---------------------------------------------------------------------------------------------------------
      receiveBufferSize: 128000
      sendBufferSize: 128000
      timeout: 60000
      backlog: 100
      soLingerDelaySec: 10
      readDelayOnFragmentation: 100
      fragmentationLimit: 5
      enableReadDelayOnFragmentation: true

      # ---------------------------------------------------------------------------------------------------------
      # Generic protocol configuration
      # ---------------------------------------------------------------------------------------------------------
      serverReadBufferSize: 100K
      serverWriteBufferSize: 100K
      selectorThreadCount: 4

      # ---------------------------------------------------------------------------------------------------------
      # MQTT Protocol configuration
      # ---------------------------------------------------------------------------------------------------------
      maximumSessionExpiry: 86400
      maximumBufferSize: 10M
      serverReceiveMaximum: 10
      clientReceiveMaximum: 65535
      clientMaximumTopicAlias: 32767
      serverMaximumTopicAlias: 0
      strictClientId: false

      # ---------------------------------------------------------------------------------------------------------
      # MQTT 5.0 specific
      # ---------------------------------------------------------------------------------------------------------
      minServerKeepAlive: 0
      maxServerKeepAlive: 60

      # ---------------------------------------------------------------------------------------------------------
      # Global configuration
      # ---------------------------------------------------------------------------------------------------------
      discoverable: true             # If the server registers a mdns entry for the adapter
      preferIPv6Addresses: true      # If the server should prefer IPv6 addresses over IPv4 addresses
      scanNetworkChanges: true      # If true, the server will scan for new interfaces or disconnected interfaces
      scanInterval: 60000            # Time in milliseconds to scan for network changes


    data:

      - name: "MQTT Interface on 1883"
        url: tcp://:::1883/
        protocol: mqtt
        auth: default
        selectorThreadCount: "{processors}/2"

#
# Chose 1 of the following:
#
# OrbComm can be used against the Modem Simulator
# Inmarsat can be used against production
#

#      - name: "OrbComm OGWS interface"
#        protocol: satellite
#        auth: anon
#        maxInflightEventsPerDevice: 2
#
#        # Timeouts
#        httpRequestTimeoutSec: 30
#        incomingMessagePollInterval: 10
#        outgoingMessagePollInterval: 30
#
#        maxBufferSize: 4000
#
#        sharedSecret: "This is a shared secret to use"
#        baseUrl: "http://localhost:8085/api/v1.0"
#        compressionCutoffSize: 128
#        # Namespace mapping
#        commonInboundPublishRoot: "/{deviceId}/common/in/{sin}/{min}"
#        commonOutboundPublishRoot: "/{deviceId}/common/out/#"
#        mapsInboundPublishRoot: "/{deviceId}/maps/in"
#        mapsOutboundPublishRoot: "/{deviceId}/maps/out/#"
#        outboundBroadcast: "/inmarsat/broadcast"
#
#        # Specific Auth
#        remoteAuthConfig:
#          username: "ogws client id"
#          password: "ogws client secret"
#
#
#
#      - name: "inmarsat IoT interface"
#        protocol: satellite
#        auth: anon
#        maxInflightEventsPerDevice: 2
#
#        # Timeouts
#        httpRequestTimeoutSec: 30
#        incomingMessagePollInterval: 10
#        outgoingMessagePollInterval: 30
#
#        maxBufferSize: 4000
#
#        sharedSecret: "This is a shared secret to use"
#        baseUrl: "https://api.inmarsat.com/iotMessaging/v1"
#        compressionCutoffSize: 128
#        # Namespace mapping
#        commonInboundPublishRoot: "/{deviceId}/common/in/{sin}/{min}"
#        commonOutboundPublishRoot: "/{deviceId}/common/out/#"
#        mapsInboundPublishRoot: "/{deviceId}/maps/in"
#        mapsOutboundPublishRoot: "/{deviceId}/maps/out/#"
#        outboundBroadcast: "/inmarsat/broadcast"
#
#        # Specific Auth
#        mailboxId: "<mailbox - id>"
#        mailboxPassword: "<mailbox password"
#        remoteAuthConfig:
#          username: "<username>"
#          password: "<secrect>"

